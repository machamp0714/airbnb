<div id='calendar'></div>

<script>
  window.reservations = <%= raw @events.to_json %>
  console.log(reservations);

  function showReservations(data) {
    return data.map(e => {
      return {
        name: e.name,
        start: e["start_date"],
        end: e["end_date"],
        status: e.status
      }
    });
  }

  $("#calendar").fullCalendar({
    header: {
      left: "title",
      center: "",
      right: "prev, next"
    },
    defaultDate: $("#start-date").val(),
    events: showReservations(reservations),
    eventRender: function(event, element, view) {
      return $(`
        <a class="fc-day-grid-event fc-h-event fc-event fc-start fc-end">
          <div class="fc-content ${event.status}">
            <span class="fc-title">${event.name}</span>
          </div>
        </a>  
      `);
    }
  });
</script>